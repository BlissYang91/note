@[TOC]

## AndroidStudio编写测试类运行报错：Could not create task :app Test.main()

```
* Where:
Initialization script 'C:\Users\Administrator\AppData\Local\Temp\TestTest_main__.gradle' line: 21
 
* What went wrong:
A problem occurred configuring project ':app'.
> Could not create task ':app:TestTest.main()'.
   > SourceSet with name 'main' not found.

```

>project模式->.idea文件夹->gradle.xml，在 <GradleProjectSettings> 节点里，增加：

```
<option name="delegatedBuild" value="false"/>
```

## 平板开发屏幕尺寸获取异常导致应用启动页面失真问题
 >在activity的onCreate方法中，setContentView之前监听ViewTreeObserver.OnGlobalLayoutListener的接口动态修改自己应用离屏幕边界的距离
```
public class MyActivity implements ViewTreeObserver.OnGlobalLayoutListener{

     @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initDeviceProfile(((CarLauncherBaseApplication) getApplication()).getInvariantDeviceProfile());
        activityMainBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.activity_main,null,false);
        view = activityMainBinding.getRoot();

        view.getViewTreeObserver().addOnGlobalLayoutListener(this);

        setContentView(view);

    }

    @Override
    public void onGlobalLayout() {
        view.getViewTreeObserver().removeOnGlobalLayoutListener((ViewTreeObserver.OnGlobalLayoutListener) this);
        int measuredWidth = view.getMeasuredWidth();
        //在应用启动的时候此处获取的尺寸会不一样，根据自己设置的允许的尺寸修改自己应用的根布局距离屏幕边界的距离
        Log.d(TAG, "onCreate: addOnGlobalLayoutListener measuredWidth = "+measuredWidth);
        FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) view.getLayoutParams();
        if (measuredWidth == 1304) {
            Log.d(TAG, "onCreate: onGlobalLayout: full screen "+ measuredWidth);
            layoutParams.setMargins(48,0,48,0);
        } else if (measuredWidth == 1256) {
            Log.d(TAG, "onCreate: onGlobalLayout: incomplete screen "+ measuredWidth);
            layoutParams.setMargins(48,0,0,0);
        } else {
            //1208
            Log.d(TAG, "onCreate: onGlobalLayout: allow_measured_width "+ measuredWidth);
            layoutParams.setMargins(0,0,0,0);
        }
        view.setLayoutParams(layoutParams);
    }
}
```