```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;

public class DateUtil {
    public static String[] WEEK = new String[]{"天", "一", "二", "三", "四", "五", "六"};

    private static final long ONE_SECOND = 1000;
    private static final long ONE_MINUTE = ONE_SECOND * 60;
    private static final long ONE_HOUR = ONE_MINUTE * 60;
    private static final long ONE_DAY = ONE_HOUR * 24;

    public static final String FORMAT = "yyyy-MM-dd HH:mm:ss";
    public static final String FORMAT1 = "yyyy-MM-dd";


    /**
     * 专为我的评论设计
     *
     * @return
     */
    public static String commonDate2String(Date date) {
        if (date == null)
            return "";
        SimpleDateFormat sdf = new SimpleDateFormat(FORMAT1);
        String s = sdf.format(date.getTime());
        return s;
    }

    /**
     * String 转换 Date
     *
     * @param str
     * @param format
     * @return
     */
    public static Date string2Date(String str, String format) {
        try {
            return new SimpleDateFormat(format).parse(str);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return new Date();
    }

    /**
     * Date（long） 转换 String
     *
     * @param time
     * @param format
     * @return
     */
    public static String date2String(long time, String format) {
        SimpleDateFormat sdf = new SimpleDateFormat(format);
        String s = sdf.format(time);
        return s;
    }

    /**
     * long 去除 时分秒
     * 时分秒全部为0
     *
     * @param date
     * @return
     */
    public static long getYearMonthDay(long date) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(date);
        calendar.set(Calendar.HOUR_OF_DAY, 0);
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.MILLISECOND, 0);
        return calendar.getTimeInMillis();
    }

    /**
     * Date 转换 HH
     *
     * @param date
     * @return
     */
    public static String date2HH(Date date) {
        return new SimpleDateFormat("HH").format(date);
    }

    /**
     * Date 转换 HH:mm:ss
     *
     * @param date
     * @return
     */
    public static String date2HHmm(Date date) {
        return new SimpleDateFormat("HH:mm").format(date);
    }

    /**
     * Date 转换 HH:mm:ss
     *
     * @param date
     * @return
     */
    public static String date2HHmmss(Date date) {
        return new SimpleDateFormat("HH:mm:ss").format(date);
    }

    /**
     * Date 转换 MM.dd
     *
     * @param date
     * @return
     */
    public static String date2MMdd(Date date) {
        return new SimpleDateFormat("MM.dd").format(date);
    }

    /**
     * Date 转换 yyyy.MM.dd
     *
     * @param date
     * @return
     */
    public static String date2yyyyMMdd(Date date) {
        return new SimpleDateFormat("yyyy.MM.dd").format(date);
    }

    /**
     * Date 转换 MM月dd日 星期
     *
     * @param date
     * @return
     */
    public static String date2MMddWeek(Date date) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
        return new SimpleDateFormat("MM月dd日 星期").format(date) + WEEK[dayOfWeek - 1];
    }

    /**
     * Date 转换 yyyy年MM月dd日 星期
     *
     * @param date
     * @return
     */
    public static String date2yyyyMMddWeek(Date date) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
        return new SimpleDateFormat("yyyy年MM月dd日 星期").format(date) + WEEK[dayOfWeek - 1];
    }

    // strTime要转换的String类型的时间
    // formatType时间格式
    // strTime的时间格式和formatType的时间格式必须相同
    public static long stringToLong(String strTime, String formatType)
            throws ParseException {
        Date date = stringToDate(strTime, formatType); // String类型转成date类型
        if (date == null) {
            return 0;
        } else {
            long currentTime = dateToLong(date); // date类型转成long类型
            return currentTime;
        }
    }

    // strTime要转换的string类型的时间，formatType要转换的格式yyyy-MM-dd HH:mm:ss//yyyy年MM月dd日
    // HH时mm分ss秒，
    // strTime的时间格式必须要与formatType的时间格式相同
    public static Date stringToDate(String strTime, String formatType)
            throws ParseException {
        SimpleDateFormat formatter = new SimpleDateFormat(formatType);
        Date date = null;
        date = formatter.parse(strTime);
        return date;
    }

    // date转long
    public static long dateToLong(Date date) {
        return date.getTime();
    }

    /**
     * 判断当前date是否是今天
     *
     * @param day
     * @return
     * @throws ParseException
     */
    public static boolean IsToday(String day) throws ParseException {

        Calendar pre = Calendar.getInstance();
        Date predate = new Date(System.currentTimeMillis());
        pre.setTime(predate);
        Calendar cal = Calendar.getInstance();
        Date date = getDateFormat().parse(day);
        cal.setTime(date);
        if (cal.get(Calendar.YEAR) == (pre.get(Calendar.YEAR))) {
            int diffDay = cal.get(Calendar.DAY_OF_YEAR)
                    - pre.get(Calendar.DAY_OF_YEAR);

            if (diffDay == 0) {
                return true;
            }
        }
        return false;
    }

    public static SimpleDateFormat getDateFormat() {
        if (null == DateLocal.get()) {
            DateLocal.set(new SimpleDateFormat("yyyy-MM-dd", Locale.CHINA));
        }
        return DateLocal.get();
    }


    private static ThreadLocal<SimpleDateFormat> DateLocal = new ThreadLocal<SimpleDateFormat>();

}

```
## 时间转换
```
package com.beans.base.utils;

import android.annotation.SuppressLint;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;

import static com.beans.base.utils.DateUtil.dateToLong;

/**
 * <p>Title      : TODO[应用名]_[基础]</p>
 * <p>Description: TODO[时间工具管理类]</p>
 * <p>Copyright  : Copyright (c) 2016</p>
 * <p>Company    : 北京四维图新科技股份有限公司</p>
 * <p>Department : Telematics业务部</p>
 *
 * @author : wangyam
 * @version : 1.0
 */
public class TimeUtils {

    public enum TimeUnit {
        MSEC,
        SEC,
        MIN,
        HOUR,
        DAY
    }


    /******************** 时间相关常量 ********************/

    public static final String COMMON_GMT_DATE = "yyyyMMddHHmmss";// 精确到秒
    public static final String COMMON_GMT_DATE_MS = "yyyyMMddHHmmssSSS";// 精确到毫秒
    public static final String COMMON_DATE = "yyyy-MM-dd HH:mm:ss";// 精确到秒
    public static final String MESSAGE_DATE_Day = "yyyy-MM-dd";// 精确到时分
    public static final String COMMON_DATE_SERVICE = "yyyy/MM/dd";
    public static final String COMMON_DATE_SERVICE_HM = "yyyy/MM/dd HH:mm";
    public static final String COMMON_DATE__SERVICE_HM = "yyyy-MM-dd HH:mm";
    public static final String CONTROL_HM = "HH:mm";
    public static final String CONTROL_MD_HM = "MM/dd HH:mm";
    public static final String CONTROL_MD = "MM-dd";
    public static final String MESSAGE_MD = "MM月dd日";


    /**
     * 获取系统当前时间字符串
     *
     * @param type
     * @return String
     * @author : wangyam
     * @update :2016/4/25
     */
    public static String getCurrentTime(String type) {
        return format(Calendar.getInstance().getTime(), type);
    }

     * 将日期按指定转换字符串
     *
     * @param date
     * @param type
     * @return String
     * @author : wangyam
     * @update :2016/4/25
     */
    public static String format(Date date, String type) {
        if (date == null) {
            return null;
        }
        @SuppressLint("SimpleDateFormat") SimpleDateFormat sdf = new SimpleDateFormat(type);
        return sdf.format(date);
    }

    /**
     * <p>Discription: TODO[将字符串格式化日期]</p>
     *
     * @param time
     * @param type
     * @return String
     * @author : wangyam
     * @update :2016/4/25
     */
    public static String format(String time, String type) {
        @SuppressLint("SimpleDateFormat") SimpleDateFormat sdf = new SimpleDateFormat(type);
        Date date = new Date();
        try {
            date = sdf.parse(time);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        if (date == null) {
            return null;
        }

        return sdf.format(date);
    }


    /**
     * <p>Discription:[long转为String type格式]</p>
     *
     * @param s
     * @param type
     * @return String
     * @author : wangyam
     * @update :2016/4/25
     */
    public static String longToString(long s, String type) {
        String ret = "";
        String strTime = String.valueOf(s);
        if (strTime != null) {
            if (strTime.length() == 10) {
                strTime = String.valueOf(Integer.valueOf(strTime) * 1000l);
            }
            Date date = new Date(Long.valueOf(strTime));
            ret = format(date, type);
        }
        return ret;
    }


    /**
     * <p>Discription: TODO[yyyy-MM-dd HH:mm:ss 转为Date]</p>
     *
     * @param string
     * @return Date
     * @author : wangyam
     * @update :2016/4/25
     */
    public static Date stringToDate(String string) {
        Date ret = null;
        if (string != null) {
            SimpleDateFormat sdfDateFormat = new SimpleDateFormat(COMMON_DATE);
            try {
                ret = sdfDateFormat.parse(string);
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }
        return ret;
    }

    /**
     * <p>Discription: TODO[将给定字符按照给定模式转换为日期类型]</p>
     *
     * @param date
     * @param pattern
     * @return Date
     * @author : wangyam
     * @update :2016/4/25
     */
    public static Date stringToDate(String date, String pattern) {
        SimpleDateFormat sdf = new SimpleDateFormat(pattern, Locale.getDefault());

        try {
            return sdf.parse(date);
        } catch (ParseException e) {
            return null;
        }
    }

  
    public static String getTimeFormat(long time) {

        String ret = "---";
        //处理时间
        String inTime = TimeUtils.longToString(time, COMMON_DATE);
        if (inTime.isEmpty()) {
            return ret;
        }
        ret = inTime;
        //当前时间
        String curTime = getCurrentTime(COMMON_DATE);

        //若当前时间与处理时间的年数不同，；若年数相同，判断时间日期，当前日期只显示时分秒，昨天时间显示昨天加时分秒，其他，显示整个时间。
        if (curTime.substring(0, 4).equals(inTime.substring(0, 4))) {//年限相同
            int curDay = Integer.valueOf(curTime.substring(8, 10));
            int inDay = Integer.valueOf(inTime.substring(8, 10));

            int curMon = Integer.valueOf(curTime.substring(5, 7));
            int inMon = Integer.valueOf(inTime.substring(5, 7));
            if (curMon - inMon == 0) {//日期相同
                if (curDay == inDay) {
                    ret = inTime.substring(11, 16);
                    return ret;
                } else if (curDay - inDay == 1) {
                    ret = "昨天 " + inTime.substring(11, 16);
                    return ret;
                }
            } else if (curMon - inMon == 1) {
                int day = curDay - inDay;
                if (day == -30 || day == -29 || day == -28 || day == -27) {
                    ret = "昨天 " + inTime.substring(11, 16);
                    return ret;
                }
            }
        }
        ret = ret.substring(0, 16);// add by charlie  不显示秒
        ret = ret.replace("-", "/");
        return ret;
    }


    /**
     * 判断当前日期是星期几
     *
     * @param strDate 修要判断的时间
     * @return dayForWeek 判断结果
     * @Exception 发生异常<br>
     */
    public static int stringForWeek(String strDate) throws Exception {
        SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
        Calendar c = Calendar.getInstance();
        c.setTime(format.parse(strDate));
        if (c.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
            return 7;
        } else {
            return c.get(Calendar.DAY_OF_WEEK) - 1;
        }
    }

   
    public static final SimpleDateFormat DEFAULT_SDF = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.getDefault());


    /**
     * 获取当前时间
     * <p>格式为用户自定义</p>
     *
     * @param format 时间格式
     * @return 时间字符串
     */
    public static String getCurTimeString(SimpleDateFormat format) {
        return date2String(new Date(), format);
    }

    /**
     * 将Date类型转为时间字符串
     * <p>格式为yyyy-MM-dd HH:mm:ss</p>
     *
     * @param time Date类型时间
     * @return 时间字符串
     */
    public static String date2String(Date time) {
        return date2String(time, DEFAULT_SDF);
    }

    /**
     * 将Date类型转为时间字符串
     * <p>格式为用户自定义</p>
     *
     * @param time   Date类型时间
     * @param format 时间格式
     * @return 时间字符串
     */
    public static String date2String(Date time, SimpleDateFormat format) {
        return format.format(time);
    }


    /**
     * <p>Discription: [将2017-06-23日期按照MM月dd日显示]</p>
     *
     * @author : wangyam
     * @update :2017/6/17
     */
    public static String getTimeByType(String time) {

        String mMonth = time.substring(5, 7);// 获取当前月份
        String mDay = time.substring(8, 10);// 获取当前日份的日期号码

        return mMonth + "-" + mDay + "";
    }

    /**
     * long类型转换为时间戳
     *
     * @param milSecond
     * @param pattern
     * @return
     */
    public static String getDateToString(long milSecond, String pattern) {
        Date date = new Date(milSecond / 1000);
        SimpleDateFormat format = new SimpleDateFormat(pattern);
        return format.format(date);
    }

    /**
     * 判断缓存的String数据是否到期
     *
     * @param str
     * @return true：到期了 false：还没有到期
     */
    public static boolean isDue(String str) {
        return isDue(str.getBytes());
    }

    /**
     * 判断缓存的byte数据是否到期
     *
     * @param data
     * @return true：到期了 false：还没有到期
     */
    private static boolean isDue(byte[] data) {
        String[] strs = getDateInfoFromDate(data);
        if (strs != null && strs.length == 2) {
            String saveTimeStr = strs[0];
            while (saveTimeStr.startsWith("0")) {
                saveTimeStr = saveTimeStr.substring(1, saveTimeStr.length());
            }
            long saveTime = Long.valueOf(saveTimeStr);
            long deleteAfter = Long.valueOf(strs[1]);
            if (System.currentTimeMillis() > saveTime + deleteAfter * 1000) {
                return true;
            }
        }
        return false;
    }

    public static String newStringWithDateInfo(int second, String strInfo) {
        return createDateInfo(second) + strInfo;
    }

    private static final char mSeparator = ' ';

    private static String createDateInfo(int second) {
        String currentTime = System.currentTimeMillis() + "";
        while (currentTime.length() < 13) {
            currentTime = "0" + currentTime;
        }
        return currentTime + "-" + second + mSeparator;
    }


    private static String[] getDateInfoFromDate(byte[] data) {
        if (hasDateInfo(data)) {
            String saveDate = new String(copyOfRange(data, 0, 13));
            String deleteAfter = new String(copyOfRange(data, 14, indexOf(data, mSeparator)));
            return new String[]{saveDate, deleteAfter};
        }
        return null;
    }

    private static int indexOf(byte[] data, char c) {
        for (int i = 0; i < data.length; i++) {
            if (data[i] == c) {
                return i;
            }
        }
        return -1;
    }

    public static String clearDateInfo(String strInfo) {
        if (strInfo != null && hasDateInfo(strInfo.getBytes())) {
            strInfo = strInfo.substring(strInfo.indexOf(mSeparator) + 1, strInfo.length());
        }
        return strInfo;
    }

    private static byte[] clearDateInfo(byte[] data) {
        if (hasDateInfo(data)) {
            return copyOfRange(data, indexOf(data, mSeparator) + 1, data.length);
        }
        return data;
    }

    private static boolean hasDateInfo(byte[] data) {
        return data != null && data.length > 15 && data[13] == '-' && indexOf(data, mSeparator) > 14;
    }

    private static byte[] copyOfRange(byte[] original, int from, int to) {
        int newLength = to - from;
        if (newLength < 0)
            throw new IllegalArgumentException(from + " > " + to);
        byte[] copy = new byte[newLength];
        System.arraycopy(original, from, copy, 0, Math.min(original.length - from, newLength));
        return copy;
    }

    public static long stringToLong(String time, String timeType){
        Date date = stringToDate(time, timeType); // String类型转成date类型
        if (date == null) {
            return 0;
        } else {
            long currentTime = dateToLong(date); // date类型转成long类型
            return currentTime;
        }
    }

    /**
     * 预约空调 判断选择时间是否大于当前时间，小于，日期+1=明天
     */
    public static String isShowSubAirTime(String subTime){
        Date date = new Date();
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        String newTime = calendar.get(Calendar.HOUR_OF_DAY)+":"+calendar.get(Calendar.MINUTE);
        if(stringToLong(subTime,CONTROL_HM) < stringToLong(newTime,CONTROL_HM)){
            calendar.add(calendar.DATE,1);//把日期往后增加一天.整数往后推,负数往前移动
            date = calendar.getTime(); //这个时间就是日期往后推一天的结果

        }else{

        }
        return date2String(date,new SimpleDateFormat(MESSAGE_MD))+" "+subTime;
    }
}

```